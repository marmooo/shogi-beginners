function loadConfig(){localStorage.getItem('darkMode')==1&&(document.documentElement.dataset.theme='dark'),localStorage.getItem('voice')!=1&&(document.getElementById('voiceOn').classList.add('d-none'),document.getElementById('voiceOff').classList.remove('d-none'))}loadConfig();function toggleVoice(a){if(localStorage.getItem('voice')==1)localStorage.setItem('voice',0),document.getElementById('voiceOn').classList.add('d-none'),document.getElementById('voiceOff').classList.remove('d-none');else{localStorage.setItem('voice',1),document.getElementById('voiceOn').classList.remove('d-none'),document.getElementById('voiceOff').classList.add('d-none'),speechSynthesis.cancel();let a=new SpeechSynthesisUtterance('音声読み上げを開始します。');a.lang='ja-JP',a.voice=japaneseVoices[Math.floor(Math.random()*japaneseVoices.length)],speechSynthesis.speak(a)}}function toggleDarkMode(){localStorage.getItem('darkMode')==1?(localStorage.setItem('darkMode',0),delete document.documentElement.dataset.theme):(localStorage.setItem('darkMode',1),document.documentElement.dataset.theme='dark')}let japaneseVoices=[];function loadVoices(){const a=new Promise(function(b,c){let a=speechSynthesis.getVoices();a.length!==0?b(a):speechSynthesis.addEventListener("voiceschanged",function(){a=speechSynthesis.getVoices(),b(a)})});a.then(a=>{japaneseVoices=a.filter(a=>a.lang=='ja-JP')})}loadVoices();function getText(b){let a='';return[...b.childNodes].forEach(b=>{b.nodeType==b.TEXT_NODE?a+=b.wholeText:b.tagName=='RUBY'&&[...b.getElementsByTagName('rt')].forEach(b=>{a+=b.innerText})}),a}